# OIDC、OAuth、FAPIなどの認証・認可技術の学習全体像

## 基本的な階層構造

これらの技術は以下のような階層関係で理解を進めるのが効果的です：

```
1. OAuth 2.0（基盤となる認可フレームワーク）
   ↓
2. OpenID Connect（OAuth 2.0上に構築された認証レイヤー）
   ↓
3. FAPI（金融グレードのOIDC/OAuthセキュリティプロファイル）
   ↓
4. 発展的な標準（SSF、EAPなど）
```

## 本編：学習内容と見積りコマ数

### 1. 基本概念と歴史的背景 - **1コマ**
- 認証と認可の明確な違い
- 伝統的な認証・認可方式からの進化
- OAuth/OIDCが解決する問題
- 標準化団体と仕様策定プロセス

### 2. OAuth 2.0の基礎 - **2〜3コマ**
- 主要コンポーネントと役割（リソースオーナー、クライアント、認可サーバー、リソースサーバー）
- 認可フローの種類と使い分け
  - Authorization Code Flow
  - Client Credentials Flow
  - Device Authorization Flow
  - その他の認可フロー
- スコープとパーミッション
- セキュリティ上の考慮事項
- トークンタイプと管理（Bearer、JWT、DPoP）
- OAuth 2.1の変更点

### 3. OpenID Connect (OIDC)の基礎 - **2コマ**
- IDトークンの構造と検証
- 標準クレームとスコープ
- OIDCフロー（Authorization Code Flow、Implicit Flow、Hybrid Flow）
- Discovery、Dynamic Registration
- セッション管理とログアウト

### 4. 具体的なセキュリティ脆弱性と対策 - **2コマ**
- OAuth/OIDCの代表的な脆弱性
  - CSRF攻撃と対策（stateパラメータの重要性）
  - リダイレクト攻撃と防止策（redirect_uriの厳格な検証）
  - クロスサイトスクリプティング（XSS）とトークン漏洩
  - 認可コードインジェクション攻撃
  - PKCEの重要性と実装
- モバイルアプリケーション特有のセキュリティ課題
- フィッシング対策とフィッシング耐性認証
- トークンの安全な保管と更新戦略
- セキュリティヘッダーの適切な設定
- 実際に発生したセキュリティインシデントのケーススタディ

### 5. 実践的な実装パターン - **2コマ**
- SPAアプリケーションでの実装
- バックエンドAPIの保護
- モバイルアプリケーションでの実装
- マイクロサービスアーキテクチャでの適用
- トークン管理戦略

### 6. Financial-grade API (FAPI) - **2コマ**
- FAPI登場の背景と必要性
- FAPI 1.0 Read & Write プロファイル
- FAPI 2.0の特徴と進化
- JARM (JWT Secured Authorization Response Mode)
- 暗号要件と相違点
- 金融業界での実装事例

### 7. セキュリティ強化プロファイル - **1コマ**
- Enhanced Authentication Profile (EAP)
- FIDO2/WebAuthnとの統合
- パスキー認証との連携
- リスクベース認証の実装
- 多要素認証の強制

### 8. Shared Signals Framework (SSF)と関連標準 - **1コマ**
- セキュリティイベント共有の重要性
- CAEP (Continuous Access Evaluation Protocol)
- RISC (Risk and Incident Sharing and Coordination)
- セキュリティイベントの種類と構造
- リアルタイムセキュリティ対応

### 9. 運用上の考慮事項 - **1コマ**
- スケーラビリティと可用性
- 監視とロギング
- トラブルシューティング手法
- 鍵管理とローテーション
- 性能最適化テクニック

### 10. 将来の方向性 - **1コマ**
- OAuth 2.1/3.0の展望
- 分散型ID (DID)との統合
- プライバシー強化の取り組み
- 新たなセキュリティ脅威と対策
- ゼロトラストアーキテクチャとの関連性

## Appendix：補足トピック

### A1. 実世界での相互運用性とテスト - **1コマ**
- OpenID認定プログラムと認定フローの理解
- 相互運用性テストスイートとコンフォーマンステスト
- 異なるベンダー実装間の互換性確保の方法

### A2. 法規制とコンプライアンス - **1コマ**
- 金融規制（PSD2, 銀行法など）と認証・認可要件の関係
- プライバシー規制（GDPR, 個人情報保護法）との整合性
- 監査要件と証跡の確保

### A3. 日本特有の要素と国際的な差異 - **1コマ**
- 日本のBankIDや公的個人認証（JPKI）との連携
- マイナンバーカードを活用した認証の実装
- 国や地域による実装差異と標準化の課題

### A4. デジタルアイデンティティの包括的理解 - **1コマ**
- ID管理の基本原則と設計パターン
- 連携型IDと自己主権型ID(SSI)の比較
- 分散型ID(DID)の基礎とOIDCとの関係

### A5. バックエンド/フロントエンド間の責任分担 - **1コマ**
- SPA、モバイルアプリ、バックエンドサービスそれぞれの実装責任
- セキュリティリスクのあるコード実装パターンと回避策
- チーム内での連携ポイントと知識共有の方法

### A6. マイグレーション戦略 - **1コマ**
- レガシー認証システムからの段階的移行手法
- 並行運用期間の管理とリスク低減
- 移行時のユーザー体験維持の方法

### A7. 実際の導入事例分析 - **1〜2コマ**
- 金融機関での実装事例（成功例と課題）
- 導入時の技術的・組織的な障壁とその克服方法
- パフォーマンスとユーザー体験のバランス確保の実例

## 合計見積りコマ数

### 基本コース（本編のみ）
- **13〜15コマ**（約13〜15時間）

### 拡張コース（一部Appendix含む）
優先度の高いAppendixを加えた場合:
- **17〜19コマ**（約17〜19時間）
- 推奨追加: A2（法規制）、A3（日本特有の要素）、A5（責任分担）、A7（導入事例）

### 完全コース（全Appendix含む）
- **20〜22コマ**（約20〜22時間）

## 学習の進め方についての提案

1. **基礎から応用へ段階的に学習する**
   - OAuth→OIDC→FAPI→発展的内容の順で進める
   - 各段階で「理論」と「実装」を両輪で学ぶ

2. **ハンズオン形式を取り入れる**
   - 仕様書の理解だけでなく、実際に認証サーバーを構築してみる
   - 標準的なライブラリを使った実装演習を行う

3. **現実のユースケースを元に学ぶ**
   - 一般的なWebアプリケーション
   - マイクロサービスアーキテクチャ
   - 金融アプリケーション特有の要件

4. **学習効果を高めるために**
   - 各講義の合間に質疑応答の時間を十分に取る
   - 演習や実装時間を講義とは別に設ける
   - チームの既存知識レベルに応じて内容の深さを調整する
